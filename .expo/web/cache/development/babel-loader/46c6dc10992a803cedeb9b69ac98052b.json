{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useState, useEffect } from \"react\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport { BackgroundLinear } from \"../Home/gradient\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport InputComponent from \"../../components/input/index\";\nimport ButtonComponent from \"../../components/button/index\";\nimport { database } from \"../../config/firebase\";\nimport { collection, addDoc, getDocs } from \"firebase/firestore\";\nimport { Container, ImageComponet, TextComponet, TitleComponet, Button } from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Login = function Login() {\n  var userCollection = collection(database, \"User\");\n  var navigation = useNavigation();\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    tasks = _useState6[0],\n    setTasks = _useState6[1];\n  var handleLogin = function () {\n    var _ref = _asyncToGenerator(function* () {\n      if (email && password) {\n        yield addDoc(userCollection, {\n          email: email,\n          password: password\n        });\n        navigation.navigate(\"Home\");\n      } else {\n        alert(\"Preencha todos os campos!\");\n      }\n    });\n    return function handleLogin() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var getUser = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var data = yield getDocs(userCollection);\n        var userData = data.docs.map(function (doc) {\n          return _objectSpread(_objectSpread({}, doc.data()), {}, {\n            id: doc.id\n          });\n        });\n        if (userData) {\n          userData.map(function (e) {\n            setEmail(e.email);\n            setPassword(e.password);\n          });\n        }\n        setTasks(data.docs.map(function (doc) {\n          return _objectSpread(_objectSpread({}, doc.data()), {}, {\n            id: doc.id\n          });\n        }));\n      });\n      return function getUser() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    getUser();\n  }, []);\n  return _jsx(BackgroundLinear, {\n    children: _jsxs(Container, {\n      children: [_jsx(ImageComponet, {\n        source: require(\"../../assets/logo.png\")\n      }), _jsx(TitleComponet, {\n        children: \"Barbearia Rei Do Corte\"\n      }), _jsx(TextComponet, {\n        children: \"Fa\\xE7a Login com Firestore\"\n      }), _jsx(InputComponent, {\n        value: email,\n        onChangeText: function onChangeText(value) {\n          return setEmail(value);\n        },\n        type: \"text\",\n        label: \"Email\",\n        placeholder: \"email@email.com\"\n      }), _jsx(InputComponent, {\n        value: password,\n        onChangeText: function onChangeText(value) {\n          return setPassword(value);\n        },\n        type: \"password\",\n        label: \"Senha\",\n        placeholder: \"******\"\n      }), _jsx(ButtonComponent, {\n        onPress: handleLogin,\n        text: \"Entrar\"\n      })]\n    })\n  });\n};\nexport default Login;","map":{"version":3,"names":["useState","useEffect","Icon","BackgroundLinear","useNavigation","InputComponent","ButtonComponent","database","collection","addDoc","getDocs","Container","ImageComponet","TextComponet","TitleComponet","Button","Login","userCollection","navigation","email","setEmail","password","setPassword","tasks","setTasks","handleLogin","navigate","alert","getUser","data","userData","docs","map","doc","id","e","require","value"],"sources":["C:/Users/rafael.r/OneDrive - COMPASSO TECNOLOGIA LTDA/Área de Trabalho/React-Native/firestore/barbearia-native/src/pages/Login/index.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Icon from \"react-native-vector-icons/FontAwesome\";\r\nimport { BackgroundLinear } from \"../Home/gradient\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport InputComponent from \"../../components/input/index\";\r\nimport ButtonComponent from \"../../components/button/index\";\r\nimport { database } from \"../../config/firebase\";\r\nimport { collection, addDoc, getDocs } from \"firebase/firestore\";\r\n\r\nimport {\r\n  Container,\r\n  ImageComponet,\r\n  TextComponet,\r\n  TitleComponet,\r\n  Button,\r\n} from \"./styles\";\r\n\r\nconst Login = () => {\r\n  const userCollection = collection(database, \"User\");\r\n\r\n  const navigation = useNavigation();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [tasks, setTasks] = useState([]);\r\n\r\n  const handleLogin = async () => {\r\n    if (email && password) {\r\n      await addDoc(userCollection, {\r\n        email: email,\r\n        password: password,\r\n      });\r\n      navigation.navigate(\"Home\");\r\n    } else {\r\n      alert(\"Preencha todos os campos!\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      const data = await getDocs(userCollection);\r\n      //console.log(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n      const userData = data.docs.map((doc) => ({ ...doc.data(), id: doc.id }))\r\n\r\n      if(userData){\r\n        userData.map((e) => {\r\n          setEmail(e.email);\r\n          setPassword(e.password);\r\n        });\r\n      }\r\n      setTasks(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n    getUser();\r\n  }, []);\r\n \r\n  \r\n\r\n  return (\r\n    <BackgroundLinear>\r\n      <Container>\r\n   \r\n\r\n        <ImageComponet source={require(\"../../assets/logo.png\")} />\r\n        <TitleComponet>Barbearia Rei Do Corte</TitleComponet>\r\n        <TextComponet>Faça Login com Firestore</TextComponet>\r\n\r\n        <InputComponent\r\n          value={email}\r\n          onChangeText={(value) => setEmail(value)}\r\n          type=\"text\"\r\n          label=\"Email\"\r\n          placeholder=\"email@email.com\"\r\n        ></InputComponent>\r\n\r\n        <InputComponent\r\n          value={password}\r\n          onChangeText={(value) => setPassword(value)}\r\n          type=\"password\"\r\n          label=\"Senha\"\r\n          placeholder=\"******\"\r\n        ></InputComponent>\r\n\r\n        <ButtonComponent onPress={handleLogin} text=\"Entrar\"></ButtonComponent>\r\n      </Container>\r\n    </BackgroundLinear>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}